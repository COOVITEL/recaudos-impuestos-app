import{c as I,j as e,B as $,s as A}from"./setDatas.RzFitsu7.js";import{r as s}from"./index.NEDEFKed.js";function M(){const[r,u]=s.useState(""),[o,a]=s.useState(0),[C,x]=s.useState(""),[f,h]=s.useState(""),[b,m]=s.useState(""),[g,j]=s.useState(""),[i,y]=s.useState(!1),[v,p]=s.useState(!1),[R,l]=s.useState(!1),[E,S]=s.useState(!1),[N,w]=s.useState(!1),[L,d]=s.useState(!1),[D,F]=s.useState(""),c=s.useCallback(t=>{if(t.key==="Enter"){if(window.removeEventListener("keydown",c),y(!1),d(!1),r!==""){x(r.substring(52,60));const n=I();parseInt(r.substring(52,60))<parseInt(n)?p(!0):(h(r.substring(38,50)),m(r.substring(20,32)),j(r.substring(3,16)),l(!0))}return}if(t.key!=="Alt"&&t.key!=="("&&t.key!==")"){if((o===32||o===53)&&t.key==="0"){a(n=>n+1);return}if((o===33||o===54)&&t.key==="2"){a(n=>n+1);return}if((o===34||o===55)&&t.key==="9"){a(n=>n+1);return}else u(n=>n+t.key),a(n=>n+1)}},[r,o]);s.useEffect(()=>(i?window.addEventListener("keydown",c):(d(!1),window.removeEventListener("keydown",c)),()=>{window.removeEventListener("keydown",c)}),[i,o,c]);function k(){u(""),j(""),a(0),h(""),x(""),m(""),p(!1),l(!1)}function B(){d(!0),S(!1),w(!1),k(),y(t=>!t)}async function P(){k(),l(!1);const t=await A({convenio:g,valuePay:f,factura:b});t.success?(F(t.data),S(!0)):w(!0)}return e.jsxs("div",{className:"flex flex-col justify-center items-center bg-white py-5 px-10 rounded-2xl",children:[e.jsxs("div",{onClick:B,className:`flex flex-col h-[250px] cursor-pointer justify-center mb-5 items-center border-2 rounded-lg border-gray-500 border-solid hover:scale-105 transition-all duration-300 ${i?"bg-blue-400/50":""}`,children:[e.jsx($,{}),e.jsx("h1",{className:"text-center pb-5",children:"Escanear codigo"})]}),v&&e.jsx("h4",{className:"text-5xl text-red-600 mb-5",children:"La fecha de pago expiro"}),E&&e.jsxs("span",{className:"text-2xl border-b-2 border-[#007eb8] text-[#007eb8] font-semibold",children:["Registro de Recaudo Exitoso - # ",D.toString().padStart(5,"0")]}),N&&e.jsx("span",{className:"text-2xl border-b-2 border-red-600 text-red-600 font-semibold",children:"Registro de Recaudo Fallido"}),L&&e.jsx("span",{className:"text-2xl font-mono font-semibold",children:"Por favor escanee el codigo"}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("h3",{children:[e.jsx("strong",{children:"Codigo:"})," ",r]}),e.jsxs("h3",{children:[e.jsx("strong",{children:"Fecha:"})," ",C]}),e.jsxs("h3",{children:[e.jsx("strong",{children:"Monto:"})," ",f]}),e.jsxs("h3",{children:[e.jsx("strong",{children:"N. Factura:"})," ",b]}),e.jsxs("h3",{children:[e.jsx("strong",{children:"Convenio:"})," ",g]})]}),e.jsx("button",{className:`cursor-pointer text-2xl mt-4 px-4 py-2 rounded-md bg-[#007eb8] text-white border-2 hover:bg-[#2d2e83] transition duration-300 hover:scale-105 ${R?"":"hidden"}`,onClick:()=>P(),children:"Enviar"})]})}export{M as default};
